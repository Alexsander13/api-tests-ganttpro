# üìä API Test Reports - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∑–∞–ø—É—Å–∫ —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏ API:
```bash
cd "/Users/alex/Documents/Parcer+API tests/api-tests-ganttpro"
python -m pytest
```

–ò–ª–∏ —Å —è–≤–Ω—ã–º —É–∫–∞–∑–∞–Ω–∏–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:
```bash
python -m pytest \
  --html=reports/report.html \
  --self-contained-html \
  --junitxml=reports/junit.xml
```

### –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞:
- **HTML –æ—Ç—á—ë—Ç**: `reports/report.html` - –æ—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- **JSON –º–µ—Ç—Ä–∏–∫–∏ API**: `reports/api_coverage.json` - –º–∞—à–∏–Ω–æ—á–∏—Ç–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç
- **JUnit XML**: `reports/junit.xml` - –¥–ª—è CI/CD –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π

---

## üìà –ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—Ç—á—ë—Ç

### –í –∫–æ–Ω—Å–æ–ª–∏ –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–æ–≤:
```
=================== API Coverage Report ===================
üìä Endpoints coverage: 85.7% (30/35)
üîß HTTP methods coverage: 100.0% (4/4)
üì° Status codes coverage: 80.0% (4/5)
‚úÖ Total assertions: 247

üìã Tested Endpoints:
  ‚Ä¢ /tasks: 25 tests, 59 asserts, methods [GET, POST, PUT, DELETE], status [200, 400, 401]
  ‚Ä¢ /team: 3 tests, 7 asserts, methods [GET], status [200, 401]
  ‚Ä¢ /projects: 3 tests, 6 asserts, methods [GET], status [200, 401]
  ...
===========================================================
```

### –í HTML –æ—Ç—á—ë—Ç–µ (`reports/report.html`):
- ‚úÖ –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–µ—Å—Ç–æ–≤ (passed/failed/skipped)
- üìä **–ù–æ–≤–∞—è —Å–µ–∫—Ü–∏—è "API Coverage Summary"** —Å —Ç–∞–±–ª–∏—Ü–µ–π –º–µ—Ç—Ä–∏–∫
- üìã –î–µ—Ç–∞–ª–∏ –ø–æ –∫–∞–∂–¥–æ–º—É endpoint (–∫–æ–ª-–≤–æ —Ç–µ—Å—Ç–æ–≤, –∞—Å—Å–µ—Ä—Ç–æ–≤, –º–µ—Ç–æ–¥—ã, —Å—Ç–∞—Ç—É—Å—ã)
- üîç –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ –∫–∞–∂–¥–æ–º—É —Ç–µ—Å—Ç—É (–≤—Ä–µ–º—è, —Ä–µ–∑—É–ª—å—Ç–∞—Ç, traceback –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö)

### –í JSON —Ñ–∞–π–ª–µ (`reports/api_coverage.json`):
```json
{
  "endpoints": {
    "/tasks": {
      "tests_count": 25,
      "assertions": 59,
      "methods": ["GET", "POST", "PUT", "DELETE"],
      "status_codes": [200, 400, 401, 404]
    }
  },
  "summary": {
    "total_endpoints_tested": 30,
    "total_assertions": 247,
    "http_methods_used": ["GET", "POST", "PUT", "DELETE"],
    "status_codes_tested": [200, 400, 401, 404, 429, 500]
  }
}
```

---

## üé® Allure Report (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞:
```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Python –ø–∞–∫–µ—Ç
pip install allure-pytest

# 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Allure –∫–æ–º–∞–Ω–¥–Ω—É—é —É—Ç–∏–ª–∏—Ç—É (–¥–ª—è Mac)
brew install allure
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
python -m pytest --alluredir=reports/allure-results

# –û—Ç–∫—Ä—ã—Ç—å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –æ—Ç—á—ë—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ
allure serve reports/allure-results
```

### –ß—Ç–æ –¥–∞—ë—Ç Allure:
- üìä **–ö—Ä–∞—Å–∏–≤—ã–π dashboard** —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ –∏ —Ç—Ä–µ–Ω–¥–∞–º–∏
- üìà **–ì—Ä–∞—Ñ–∏–∫–∏ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è** —Ç–µ—Å—Ç–æ–≤ –ø–æ –≤—Ä–µ–º–µ–Ω–∏
- üîç **–î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è** –ø–æ –∫–∞–∂–¥–æ–º—É —Ç–µ—Å—Ç—É
- üìé **Attachments** - request/response –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–∫—Ä–µ–ø–ª—è—é—Ç—Å—è
- üìÅ **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞** –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º, —Å—É–∏—Ç–∞–º, —ç–ø–∏–∫–∞–º
- ‚è±Ô∏è **Timeline** –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤
- üìâ **–ò—Å—Ç–æ—Ä–∏—è** –∑–∞–ø—É—Å–∫–æ–≤ (–µ—Å–ª–∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å results –º–µ–∂–¥—É –∑–∞–ø—É—Å–∫–∞–º–∏)

---

## üîß –ß—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–æ –≤ –ø—Ä–æ–µ–∫—Ç–µ

### 1. **pytest.ini**
- ‚ùå –£–¥–∞–ª–µ–Ω—ã `--cov` —Ñ–ª–∞–≥–∏ (coverage –æ—Ç–∫–ª—é—á–µ–Ω)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –ø–ª–∞–≥–∏–Ω `api_coverage_plugin`

### 2. **–ù–æ–≤—ã–π —Ñ–∞–π–ª: tests/api_coverage_plugin.py**
–ü–ª–∞–≥–∏–Ω pytest, –∫–æ—Ç–æ—Ä—ã–π:
- –°—á–∏—Ç–∞–µ—Ç –ø–æ–∫—Ä—ã—Ç–∏–µ endpoints, –º–µ—Ç–æ–¥–æ–≤, —Å—Ç–∞—Ç—É—Å-–∫–æ–¥–æ–≤
- –°—á–∏—Ç–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ assertions –≤ –∫–∞–∂–¥–æ–º —Ç–µ—Å—Ç–µ
- –í—ã–≤–æ–¥–∏—Ç –∫—Ä–∞—Å–∏–≤—ã–π –æ—Ç—á—ë—Ç –≤ –∫–æ–Ω—Å–æ–ª—å
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç JSON —Ñ–∞–π–ª —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏

### 3. **–ù–æ–≤—ã–π —Ñ–∞–π–ª: conftest.py (–≤ –∫–æ—Ä–Ω–µ)**
- –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç api_coverage_plugin
- –î–æ–±–∞–≤–ª—è–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ API –≤ HTML –æ—Ç—á—ë—Ç
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Allure (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)

### 4. **src/http_client.py**
- –î–æ–±–∞–≤–ª–µ–Ω `self.last_response` –¥–ª—è Allure attachments

### 5. **requirements-optional.txt**
- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è Allure –∏ JSON –æ—Ç—á—ë—Ç–æ–≤

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ API Coverage

–ü–ª–∞–≥–∏–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–±–∏—Ä–∞–µ—Ç:

1. **Endpoints Coverage** - –∫–∞–∫–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –ø–æ–∫—Ä—ã—Ç—ã —Ç–µ—Å—Ç–∞–º–∏
2. **HTTP Methods Coverage** - GET/POST/PUT/DELETE –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
3. **Status Codes Coverage** - –∫–∞–∫–∏–µ —Å—Ç–∞—Ç—É—Å-–∫–æ–¥—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è (200/400/401/404/500)
4. **Assertions Count** - —Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–æ–∫ –≤ –∫–∞–∂–¥–æ–º —Ç–µ—Å—Ç–µ

---

## üéØ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ó–∞–ø—É—Å–∫ —Ç–æ–ª—å–∫–æ —Ç–µ—Å—Ç–æ–≤ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á:
```bash
python -m pytest tests/endpoints/tasks/test_tasks_create.py -v
```

### –ó–∞–ø—É—Å–∫ —Å Allure –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∏—Å—Ç–æ—Ä–∏–∏:
```bash
python -m pytest --alluredir=reports/allure-results
allure generate reports/allure-results -o reports/allure-report --clean
allure open reports/allure-report
```

### –ó–∞–ø—É—Å–∫ —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –≤—ã–≤–æ–¥–æ–º:
```bash
python -m pytest -vv -s
```

### –ó–∞–ø—É—Å–∫ —Å –æ—Å—Ç–∞–Ω–æ–≤–∫–æ–π –Ω–∞ –ø–µ—Ä–≤–æ–π –æ—à–∏–±–∫–µ:
```bash
python -m pytest -x
```

---

## üêõ Troubleshooting

### –ï—Å–ª–∏ –ø–ª–∞–≥–∏–Ω –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª `tests/api_coverage_plugin.py` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ `pytest.ini` —É–∫–∞–∑–∞–Ω–æ: `plugins = api_coverage_plugin`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –µ—Å—Ç—å `conftest.py` —Å `pytest_plugins = ['tests.api_coverage_plugin']`

### –ï—Å–ª–∏ Allure –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É: `allure --version`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø–∞–∫–µ—Ç: `pip show allure-pytest`
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å: `brew reinstall allure`

---

## üìù –ó–∞–º–µ—Ç–∫–∏

- Coverage –∫–æ–¥–∞ (src/) **–æ—Ç–∫–ª—é—á–µ–Ω** - –æ–Ω –Ω–µ –≤–∞–∂–µ–Ω –¥–ª—è API —Ç–µ—Å—Ç–æ–≤
- –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ —Ç–µ–ø–µ—Ä—å - **–ø–æ–∫—Ä—ã—Ç–∏–µ API endpoints –∏ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤**
- HTML –æ—Ç—á—ë—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–æ–≤—É—é —Å–µ–∫—Ü–∏—é —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏ API
- JSON —Ñ–∞–π–ª –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∏ CI/CD
- Allure - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π, –Ω–æ –æ—á–µ–Ω—å —É–¥–æ–±–Ω—ã–π –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏

---

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Pytest Documentation](https://docs.pytest.org/)
- [Allure Report Documentation](https://docs.qameta.io/allure/)
- [pytest-html Plugin](https://pytest-html.readthedocs.io/)
